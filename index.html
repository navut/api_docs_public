
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#basics" class="toc-h2 toc-link" data-title="Basics">Basics</a>
                  </li>
                  <li>
                    <a href="#staging-production" class="toc-h2 toc-link" data-title="Staging/Production">Staging/Production</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#making-requests" class="toc-h2 toc-link" data-title="Making requests">Making requests</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#homebuyer" class="toc-h1 toc-link" data-title="HomeBuyer">HomeBuyer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#webhook-subscriptions" class="toc-h2 toc-link" data-title="Webhook Subscriptions">Webhook Subscriptions</a>
                  </li>
                  <li>
                    <a href="#events" class="toc-h2 toc-link" data-title="Events">Events</a>
                  </li>
                  <li>
                    <a href="#event-types" class="toc-h2 toc-link" data-title="Event types">Event types</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#listing-3" class="toc-h1 toc-link" data-title="Listing">Listing</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#webhook-subscriptions-2" class="toc-h2 toc-link" data-title="Webhook Subscriptions">Webhook Subscriptions</a>
                  </li>
                  <li>
                    <a href="#events-2" class="toc-h2 toc-link" data-title="Events">Events</a>
                  </li>
                  <li>
                    <a href="#event-types-2" class="toc-h2 toc-link" data-title="Event types">Event types</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><h2 id='basics'>Basics</h2>
<p>This document illustrates how interact with NestReady events api.</p>

<p>This process can be described into two steps:</p>

<p>1) Subscribe to events for specific home_buyers.</p>

<p>2) Every time NestReady tracks an event from that home_buyers, NestReady will trigger a webhooks to your server.</p>
<h2 id='staging-production'>Staging/Production</h2>
<p>Staging URL: <code>https://events.stage-nestready.net</code></p>

<p>Production URL: <code>https://events.nestready.net</code></p>
<h1 id='authentication'>Authentication</h1><h2 id='making-requests'>Making requests</h2>
<p>You will need to send a personal token on every request.</p>

<p>You should receive two token from our team, one for each environment.</p>

<p>We expect you to send this information in a field called &#39;X-Token&#39; inside headers.</p>
<h1 id='homebuyer'>HomeBuyer</h1><h2 id='webhook-subscriptions'>Webhook Subscriptions</h2><h3 id='subscribing'>Subscribing</h3><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"listing_favorited"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"delivery_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.your_url.com/nestready/events"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id_in_your_system"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Subscribe to events for the given home_buyers.</p>

<p>Everytime you subscribe to an event, we will send you a notification with
the just created webhook information to the defined <code>delivery_url</code>.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST /home_buyers/webhooks/subscriptions</code></p>
<h4 id='parameters'>Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>home_buyer</td>
<td>yes</td>
<td>email(required) and phone of the target home_buyers</td>
</tr>
<tr>
<td>events</td>
<td>yes</td>
<td>array with the list of target events. <a href="http://localhost:4567/#events">supported_events</a>. ex: <code>[&#39;all&#39;]</code></td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>anything that you need to recognize this user in your system, or query in our API, we recommend that to be the user_id inside your system.</td>
</tr>
</tbody></table>
<h3 id='unsubscribing'>Unsubscribing</h3>
<p>Destroy a subscription, so that your system won&#39;t receive events for the given
user.</p>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>DELETE /home_buyers/webhooks/subscriptions</code></p>
<h4 id='parameters-2'>Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metadata</td>
<td>yes</td>
<td>-</td>
</tr>
</tbody></table>

<aside class="success">It will delete all matched subscriptions.</aside>
<h3 id='listing'>Listing</h3>
<p>This endpoint retrieves all home buyer subscriptions for that giver client.</p>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET /home_buyers/webhooks/subscriptions</code></p>
<h4 id='parameters-3'>Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metadata</td>
<td>yes</td>
<td>The metadata value set by the client on subscription creation</td>
</tr>
</tbody></table>
<h2 id='events'>Events</h2><h3 id='listing-2'>Listing</h3>
<p>Method used only for Disaster Recovery, the retention period is 48
hours (meaning that events occured more than 48 hours ago won&#39;t be retrieved).</p>
<pre class="highlight json tab-json"><code><span class="err">//BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"listings_per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d7bf7967b571f00122e295c"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1568405398</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_changed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"listing_diff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"2000000"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"3000000"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"peding"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"active"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='http-request-4'>HTTP Request</h4>
<p><code>GET /homebuyers/events</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metadata</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>start_at</td>
<td>yes</td>
<td>ex: 1567017624</td>
</tr>
<tr>
<td>end_at</td>
<td>yes</td>
<td>ex: 1567104024000</td>
</tr>
<tr>
<td>page</td>
<td>yes</td>
<td>ex: 1</td>
</tr>
</tbody></table>

<aside class="success">Batch size is 100 per page.</aside>
<h3 id='receiving'>Receiving</h3>
<p>After subscribing successfully, you will begin to receive events for your home_buyers to the defined delivery_url.</p>

<p>The follow schema is used for every event payload, the example of data is available <a href="/#event-types">here</a></p>
<pre class="highlight json tab-json"><code><span class="err">//BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d7bf6117b571f000f2e2989"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1568405009</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finance_requested"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"listing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"mls_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234mls"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"property_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full_address"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"year_built"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id_in_your_system"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='http-request-5'>HTTP Request</h4>
<p><code>POST delivery_url</code></p>
<h2 id='event-types'>Event types</h2><h3 id='contact_request_requested'>contact_request_requested</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"listing_favorited"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"delivery_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.your_url.com/nestready/events"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id_in_your_system"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once a user sends a request by any listed event.</p>
<h3 id='location_favorited'>location_favorited</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w"> 
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place"</span><span class="w">
            </span><span class="p">}</span><span class="w">

    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location_favorited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user &quot;pins&quot; or favorites a location either from the dashboards listings, or from the location details itself.</p>
<h3 id='location_unfavorited'>location_unfavorited</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w"> 
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place"</span><span class="w">
            </span><span class="p">}</span><span class="w">

    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location_unfavorited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user unfavorites or unpins a previously favorited location.</p>
<h3 id='property_visit_requested'>property_visit_requested</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w"> 
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"listing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"property_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full_address"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"mls_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234mls"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"year_built"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"property_visit_requested"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user clicks on the option to schedule a visit to a property, either from the listings dashboards or from the property details itself.</p>
<h3 id='listing_favorited'>listing_favorited</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w"> 
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"listing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"property_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full_address"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"mls_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234mls"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"year_built"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_favorited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user favorites or pins a listing</p>
<h3 id='listing_unfavorited'>listing_unfavorited</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"listing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"property_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full_address"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"mls_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234mls"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"year_built"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_ufavorited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This evente is triggerend once the user unfavorites or unpins a favorited listing/property.</p>
<h3 id='saved_search_updated'>saved_search_updated</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"searches"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search_1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boston"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"max_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000_000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"property_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved_search_updated"</span><span class="p">,</span><span class="w">
</span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
</span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user has already perfomed a property search and then saves it.</p>
<h3 id='search_deleted'>search_deleted</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"searches"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search_1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boston"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"max_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000_000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"property_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search_deleted"</span><span class="p">,</span><span class="w">
</span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
</span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when the user deletes a previously saved search.</p>
<h3 id='saved_search_shared'>saved_search_shared</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search_1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bathrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bedrooms_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"locationID"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boston"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metro"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"max_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100_000_000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nil"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"listing_image_cover_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://listing-images.nestready.net/dArboFrG37bMhDjHxWUMBZ3vs"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"property_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apartment/condo"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved_search_shared"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user has already perfomed a property search, saved it, then shares it.</p>
<h3 id='email_signed_up'>email_signed_up</h3><pre class="highlight json tab-json"><code><span class="err">//DATA</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"home_buyer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something@somewhere.co"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(123)12341234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-09-09 21:09:23 UTC"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_signed_up"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partner_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mybank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"journey_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered once the user provides its email for the first time using one of the home_buyers forms or sharing a search.</p>
<h1 id='listing-3'>Listing</h1><h2 id='webhook-subscriptions-2'>Webhook Subscriptions</h2><h3 id='subscribing-2'>Subscribing</h3><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"listing_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing1"</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"listing_changed"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"delivery_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.your_url.com/nestready/events"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_id_in_your_system"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Subscribe to events for the given listing.</p>

<p>Everytime you subscribe to an event, we will send you a notification with
the just created webhook information to the defined <code>delivery_url</code>.</p>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>POST /listing/webhooks/subscriptions</code></p>
<h4 id='parameters-4'>Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>listing_id</td>
<td>yes</td>
<td>email(required) and phone of the target home_buyers</td>
</tr>
<tr>
<td>events</td>
<td>yes</td>
<td>array with the list of target events. <a href="http://localhost:4567/#events">supported_events</a>. ex: <code>[&#39;all&#39;]</code></td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>anything that you need to recognize this user in your system, or query in our API, we recommend that to be the user_id inside your system.</td>
</tr>
</tbody></table>
<h3 id='unsubscribing-2'>Unsubscribing</h3>
<p>Destroy a subscription, so that your system won&#39;t receive events for the given
user.</p>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>DELETE /listing/webhooks/subscriptions</code></p>
<h4 id='parameters-5'>Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metadata</td>
<td>yes</td>
<td>-</td>
</tr>
</tbody></table>

<aside class="success">It will delete all matched subscriptions.</aside>
<h2 id='events-2'>Events</h2><h3 id='listing-4'>Listing</h3>
<p>Method used only for Disaster Recovery, the retention period is 48
hours (meaning that events occured more than 48 hours ago won&#39;t be retrieved).</p>
<pre class="highlight json tab-json"><code><span class="err">//BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_pages_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"events_per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='http-request-8'>HTTP Request</h4>
<p><code>GET /listings/events</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metadata</td>
<td>no</td>
<td>--</td>
</tr>
<tr>
<td>start_at</td>
<td>yes</td>
<td>ex: 1567017624</td>
</tr>
<tr>
<td>end_at</td>
<td>yes</td>
<td>ex: 1567104024000</td>
</tr>
<tr>
<td>page</td>
<td>yes</td>
<td>ex: 1</td>
</tr>
</tbody></table>

<aside class="success">Batch size is 100 per page.</aside>
<h3 id='receiving-2'>Receiving</h3>
<p>After subscribing to the event, whenever an event related to the subscribed homebuyer is triggered on our side, we will be sending the payload of that event to the develivery_url of the given subscription. The following schema is used for every event payload, the example of data is available.</p>
<pre class="highlight json tab-json"><code><span class="err">//BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"listings_per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d7ab6207b571f00122e2947"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1568323104</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_changed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"listing_diff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"2000000"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"3000000"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"peding"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"active"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><h4 id='http-request-9'>HTTP Request</h4>
<p><code>POST delivery_url</code></p>
<h2 id='event-types-2'>Event types</h2><pre class="highlight json tab-json"><code><span class="err">//BODY</span><span class="w"> </span><span class="err">EXAMPLE</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"listing_changed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"listing_diff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"2000000"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3000000"</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"peding"</span><span class="p">,</span><span class="w"> </span><span class="s2">"active"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"listing_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='listing_changed'>listing_changed</h3>
<p>This event is triggered when a property has an update. In this data example, the previous price for this property was 100000, then it was updated to 100001.</p>

<aside class="success">The possible statuses for listings are: [active, cancelled, closed, expired, pendind, withdrawn]</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
